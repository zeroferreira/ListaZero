<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lista d'Canciones - Zero Radio</title>
  <link rel="stylesheet" href="styles.css" />
  <!-- Firebase SDK (compat) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
</head>
<body>
  <main class="container">
    <section class="card" aria-labelledby="titulo">
      <div class="title-bar" role="group" aria-label="Barra de título y filtro">
        <h1 id="titulo">Lista de canciones</h1>
        <div class="title-tools">
          <!-- Quitamos el day-filter de aquí -->
          <button id="menu-btn" class="menu-btn" type="button" aria-label="Abrir menú" aria-haspopup="true" aria-expanded="false" aria-controls="menu-dropdown">
            <span class="bar bar1"></span>
            <span class="bar bar2"></span>
            <span class="bar bar3"></span>
          </button>
          <div id="menu-dropdown" class="menu-dropdown" hidden>
            <ul class="menu-list" role="menu" aria-label="Acciones">
              <li><a href="index.html" class="menu-item" role="menuitem">Pedir nueva canción</a></li>
              <li><button type="button" id="menu-admin-open" class="menu-item" role="menuitem">Modo Admin</button></li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Nuevo: fila de filtro de día debajo del título -->
      <div class="day-filter-row" role="group" aria-label="Filtro de día">
        <div class="day-filter">
          <label for="day-select">Ver día:</label>
          <select id="day-select"></select>
        </div>
      </div>

      <!-- Elimina cualquier bloque antiguo de menu-overlay que esté fuera de title-bar -->

      <!-- Filtro VIP (único) -->
      <div class="vip-filter">
        <label><input type="checkbox" id="vip-only" /> Ver solo VIP</label>
      </div>

      <!-- Panel de Admin (único) -->
      <div id="admin-panel" class="admin-panel" hidden>
        <div class="admin-row">
          <label for="all-users-select">Selecciona usuario registrado para VIP:</label>
          <select id="all-users-select" class="user-select" aria-label="Usuarios registrados">
            <option value="">Selecciona un usuario</option>
          </select>
          <!-- Nuevo: agrupa los botones en una columna para que "Borrar" quede debajo de "Agregar" -->
          <div class="admin-btns">
            <button type="button" id="vip-add" class="btn">Agregar</button>
            <button type="button" id="user-delete" class="btn">Borrar usuario</button>
          </div>
        </div>
        <div class="admin-row">
          <strong>Usuarios VIP:</strong>
          <ul id="vip-list" class="vip-list"></ul>
        </div>
        <div class="admin-row">
          <strong>Mantenimiento:</strong>
          <button type="button" id="wipe-all" class="btn">Borrar todas las solicitudes</button>
        </div>
        <div class="admin-row admin-actions">
          <button type="button" id="admin-exit" class="btn">Salir del modo Admin</button>
        </div>
      </div>

      <!-- Modal de contraseña Admin (único) -->
      <div id="admin-modal" class="modal-overlay" hidden>
        <div class="modal" role="dialog" aria-modal="true" aria-labelledby="admin-modal-title">
          <h2 id="admin-modal-title">Modo Admin</h2>
          <p>Inicia sesión para administrar VIP y mantenimiento</p>
          <div class="field">
            <label for="admin-email-input">Correo</label>
            <input id="admin-email-input" type="email" placeholder="correo@ejemplo.com" />
          </div>
          <div class="field">
            <label for="admin-pass-input">Contraseña</label>
            <input id="admin-pass-input" type="password" placeholder="Contraseña" />
            <p id="admin-auth-error" class="error" hidden>Credenciales incorrectas o no eres admin.</p>
          </div>
          <div class="actions modal-actions">
            <button type="button" id="admin-pass-cancel" class="btn">Cancelar</button>
            <button type="button" id="admin-pass-confirm" class="btn">Entrar</button>
          </div>
        </div>
      </div>

      <!-- Nuevo: modal de confirmación para borrar usuario registrado -->
      <div id="user-delete-modal" class="modal-overlay" hidden>
        <div class="modal" role="dialog" aria-modal="true" aria-labelledby="user-delete-modal-title">
          <h2 id="user-delete-modal-title">Borrar usuario</h2>
          <p>¿Borrar al usuario "<span id="user-delete-name"></span>" de la lista de registrados?</p>
          <div class="actions modal-actions">
            <button type="button" id="user-delete-cancel" class="btn">Cancelar</button>
            <button type="button" id="user-delete-confirm" class="btn">Borrar</button>
          </div>
        </div>
      </div>

      <!-- Nuevo: modal de confirmación para quitar VIP -->
      <div id="vip-remove-modal" class="modal-overlay" hidden>
        <div class="modal" role="dialog" aria-modal="true" aria-labelledby="vip-remove-modal-title">
          <h2 id="vip-remove-modal-title">Quitar VIP</h2>
          <p>¿Quitar VIP a "<span id="vip-remove-user"></span>"?</p>
          <div class="actions modal-actions">
            <button type="button" id="vip-remove-cancel" class="btn">Cancelar</button>
            <button type="button" id="vip-remove-confirm" class="btn">Quitar</button>
          </div>
        </div>
      </div>
      <!-- Nuevo: modal de confirmación para borrar todas las solicitudes del día -->
      <div id="wipe-all-modal" class="modal-overlay" hidden>
        <div class="modal" role="dialog" aria-modal="true" aria-labelledby="wipe-all-modal-title">
          <h2 id="wipe-all-modal-title">Borrar todas las solicitudes</h2>
          <p>¿Borrar todas las solicitudes del día "<span id="wipe-all-day"></span>"?</p>
          <div class="actions modal-actions">
            <button type="button" id="wipe-all-cancel" class="btn">Cancelar</button>
            <button type="button" id="wipe-all-confirm" class="btn">Borrar</button>
          </div>
        </div>
      </div>

      <section class="list" aria-live="polite">
        <!-- Encabezado de la lista (único) -->
        <div class="list-header" role="group" aria-label="Encabezados de lista">
          <span class="col col-time">Hora</span>
          <span class="col col-usuario">Usuario</span>
          <span class="col col-cancion">Canción</span>
          <span class="col col-artista">Artista</span>
        </div>
        <ul id="solicitudes-list" class="items"></ul>
        <p id="empty" class="empty" hidden>Aún no hay solicitudes.</p>
      </section>

      <script>
        (function () {
          // Configuración e inicialización de Firebase (igual que en index.html)
          const firebaseConfig = {
            apiKey: "AIzaSyA6c3EaIvuPEfM6sTV0YHqCBHuz35ZmNIU",
            authDomain: "zero-strom-web.firebaseapp.com",
            projectId: "zero-strom-web",
            storageBucket: "zero-strom-web.firebasestorage.app",
            messagingSenderId: "758369466349",
            appId: "1:758369466349:web:f2ced362a5a049c70b59e4"
          };
          if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
          }
          const db = firebase.firestore();
          // Exportar Firestore para el segundo bloque de script
          window.db = db;
          // Iniciar sesión anónima para que request.auth != null en reglas (si escribes VIP)
          firebase.auth().onAuthStateChanged((user) => {
            if (!user) {
              firebase.auth().signInAnonymously().catch((err) => {
                console.error('Error al iniciar sesión anónima:', err);
              });
            }
          });

          // Referencias UI
          const solicitudesList = document.getElementById('solicitudes-list');
          const emptyEl = document.getElementById('empty');
          const vipOnly = document.getElementById('vip-only');
          const daySelect = document.getElementById('day-select');

          // Admin y VIP
          const allUsersSelect = document.getElementById('all-users-select');
          const vipAddBtn = document.getElementById('vip-add');
          const vipListEl = document.getElementById('vip-list');
          const wipeAllBtn = document.getElementById('wipe-all');

          // Nuevo: referencias del modal de quitar VIP
          const vipRemoveModal = document.getElementById('vip-remove-modal');
          const vipRemoveUserSpan = document.getElementById('vip-remove-user');
          const vipRemoveCancelBtn = document.getElementById('vip-remove-cancel');
          const vipRemoveConfirmBtn = document.getElementById('vip-remove-confirm');
          let pendingVipRemoveUser = null;
          // Estado
          let vipSet = new Set();
          let unsubscribeSolicitudes = null;

          // Utilidades
          function renderSolicitudes(items) {
            solicitudesList.innerHTML = '';
            if (!items.length) {
              emptyEl.hidden = false;
              return;
            }
            emptyEl.hidden = true;
            items.forEach((it) => {
              const isVip = vipSet.has(it.usuario);
              const li = document.createElement('li');
              li.className = isVip ? 'item vip' : 'item';
              li.innerHTML = `
                <span class="col col-time">${it.hora || ''}</span>
                <span class="col col-usuario usuario">${it.usuario}</span>
                <span class="col col-cancion">${it.cancion}</span>
                <span class="col col-artista">${it.artista}</span>
              `;
              solicitudesList.appendChild(li);
            });
          }

          function toHour(ts) {
            if (!ts) return '';
            const d = ts.toDate ? ts.toDate() : new Date(ts);
            return d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
          }

          async function loadDays() {
            const snap = await db.collection('solicitudes').orderBy('day', 'desc').limit(500).get();
            const days = new Set();
            snap.forEach(doc => days.add(doc.data().day));
            const sorted = Array.from(days).sort().reverse();
            daySelect.innerHTML = '';
            sorted.forEach(d => {
              const opt = document.createElement('option');
              opt.value = d;
              opt.textContent = d;
              daySelect.appendChild(opt);
            });
            // Selecciona el primero por defecto
            if (sorted.length) {
              daySelect.value = sorted[0];
            }

            // Fallback: si Firestore no trajo días, cargar desde localStorage
            if (!daySelect.value) {
              const byDay = JSON.parse(localStorage.getItem('solicitudes_by_day') || '{}');
              const localDays = Object.keys(byDay).sort().reverse();
              if (localDays.length) {
                daySelect.innerHTML = '';
                localDays.forEach(d => {
                  const opt = document.createElement('option');
                  opt.value = d;
                  opt.textContent = d;
                  daySelect.appendChild(opt);
                });
                daySelect.value = localDays[0];
              }
            }
          }

          // Suscribirse en tiempo real a las solicitudes del día seleccionado
          function subscribeSolicitudesForDay(dayValue) {
            if (unsubscribeSolicitudes) {
              unsubscribeSolicitudes();
              unsubscribeSolicitudes = null;
            }
            const q = db.collection('solicitudes')
              .where('day', '==', dayValue)
              .orderBy('ts', 'desc');

            unsubscribeSolicitudes = q.onSnapshot((snap) => {
              let items = [];
              snap.forEach((doc) => {
                const data = doc.data();
                const isVip = vipSet.has(data.usuario);
                if (vipOnly.checked && !isVip) return;
                items.push({
                  usuario: data.usuario,
                  cancion: data.cancion,
                  artista: data.artista,
                  hora: toHour(data.ts),
                });
              });

              // Fallback: si Firestore devuelve cero, usar localStorage del día
              if (items.length === 0) {
                const byDay = JSON.parse(localStorage.getItem('solicitudes_by_day') || '{}');
                const arr = Array.isArray(byDay[dayValue]) ? byDay[dayValue] : [];
                items = arr
                  .filter(it => !vipOnly.checked || vipSet.has(it.usuario))
                  .map(it => ({
                    usuario: it.usuario,
                    cancion: it.cancion,
                    artista: it.artista,
                    hora: toHour(it.time),
                  }));
              }

              renderSolicitudes(items);
            }, (err) => {
              console.error('Error suscripción solicitudes:', err);
            });
          }

          // Suscripción a usuarios VIP
          function subscribeVipUsers() {
            db.collection('vipUsers').onSnapshot((snap) => {
              vipSet = new Set();
              vipListEl.innerHTML = '';
              snap.forEach((doc) => {
                const { name } = doc.data();
                if (name) {
                  vipSet.add(name);
                  const li = document.createElement('li');
                  li.innerHTML = `
                    <span>${name}</span>
                    <button type="button" class="remove-btn" data-user="${name}" aria-label="Quitar VIP">×</button>
                  `;
                  vipListEl.appendChild(li);
                }
              });
              // Refiltra lista actual si está suscrito
              if (daySelect.value) subscribeSolicitudesForDay(daySelect.value);
            }, (err) => {
              console.error('Error suscripción VIP:', err);
            });
          }

          // Popular select de todos los usuarios registrados
          async function renderAllUsersSelect() {
            // Primero intentamos cargar desde la colección users
            const snap = await db.collection('users').orderBy('name').get();
            const set = new Set();
          
            if (!snap.empty) {
              snap.forEach(doc => {
                const { name } = doc.data();
                if (name) set.add(name);
              });
            } else {
              // Fallback 1: recolectar usuarios desde todas las solicitudes en Firestore
              const reqSnap = await db.collection('solicitudes').orderBy('day', 'desc').limit(1000).get();
              reqSnap.forEach(doc => {
                const u = String(doc.data().usuario || '').trim();
                if (u) set.add(u);
              });
            
              // Fallback 2: si aún está vacío, recolectar desde localStorage
              if (set.size === 0) {
                try {
                  const byDay = JSON.parse(localStorage.getItem('solicitudes_by_day') || '{}');
                  Object.values(byDay).forEach(arr => (arr || []).forEach(it => {
                    const u = String(it.usuario || '').trim();
                    if (u) set.add(u);
                  }));
                  const legacy = JSON.parse(localStorage.getItem('solicitudes') || '[]');
                  (legacy || []).forEach(it => {
                    const u = String(it.usuario || '').trim();
                    if (u) set.add(u);
                  });
                } catch (_) {}
              }
            }
          
            // Poblar el select
            const list = Array.from(set).sort((a, b) => a.toLowerCase().localeCompare(b.toLowerCase()));
            allUsersSelect.innerHTML = '<option value="">Selecciona un usuario</option>';
            list.forEach(name => {
              const opt = document.createElement('option');
              opt.value = name;
              opt.textContent = name;
              allUsersSelect.appendChild(opt);
            });
          }

          // Agregar a VIP (usa el select o el input manual)
          vipAddBtn?.addEventListener('click', async () => {
            const name = allUsersSelect.value.trim();
            if (!name) {
              alert('Selecciona un usuario del listado.');
              return;
            }
            try {
              await db.collection('vipUsers').doc(name).set({ name }, { merge: true });
              // La suscripción a vipUsers actualizará vipSet y el render mostrará la insignia
            } catch (err) {
              console.error('Error al agregar VIP:', err);
              alert('No se pudo agregar el usuario a VIP. Revisa reglas/permisos.');
            }
          });

          // Quitar VIP usando modal (en modo Admin)
          vipListEl?.addEventListener('click', (e) => {
            const btn = e.target.closest('.remove-btn');
            if (!btn) return;
            const user = btn.getAttribute('data-user');
            if (!user) return;

            pendingVipRemoveUser = user;
            vipRemoveUserSpan.textContent = user;
            vipRemoveModal.hidden = false;
          });

          vipRemoveCancelBtn?.addEventListener('click', () => {
            pendingVipRemoveUser = null;
            vipRemoveModal.hidden = true;
          });

          vipRemoveConfirmBtn?.addEventListener('click', async () => {
            if (!pendingVipRemoveUser) return;
            try {
              await db.collection('vipUsers').doc(pendingVipRemoveUser).delete();
              // La suscripción a vipUsers actualizará vipSet y re-renderizará la lista
            } catch (err) {
              console.error('Error al quitar VIP:', err);
              alert('No se pudo quitar el VIP. Revisa reglas/permisos.');
            } finally {
              pendingVipRemoveUser = null;
              vipRemoveModal.hidden = true;
            }
          });

          // Borrar todas las solicitudes (del día seleccionado)
          // NUEVO: usar modal en vez de confirm()
          const wipeAllModal = document.getElementById('wipe-all-modal');
          const wipeAllDaySpan = document.getElementById('wipe-all-day');
          const wipeAllCancelBtn = document.getElementById('wipe-all-cancel');
          const wipeAllConfirmBtn = document.getElementById('wipe-all-confirm');

          wipeAllBtn?.addEventListener('click', () => {
            if (!daySelect.value) return;
            wipeAllDaySpan.textContent = daySelect.value;
            wipeAllModal.hidden = false;
          });

          wipeAllCancelBtn?.addEventListener('click', () => {
            wipeAllModal.hidden = true;
          });

          wipeAllConfirmBtn?.addEventListener('click', async () => {
            const day = daySelect.value;
            if (!day) {
              wipeAllModal.hidden = true;
              return;
            }

            wipeAllBtn.disabled = true;

            try {
              // Trae todos los docs del día
              const snap = await db.collection('solicitudes').where('day', '==', day).get();
              const docs = snap.docs;

              // Borra en lotes de hasta 500 (límite de Firestore)
              const chunkSize = 500;
              for (let i = 0; i < docs.length; i += chunkSize) {
                const batch = db.batch();
                const chunk = docs.slice(i, i + chunkSize);
                chunk.forEach(doc => batch.delete(doc.ref));
                await batch.commit();
              }

              // Limpia el fallback localStorage para ese día
              const byDay = JSON.parse(localStorage.getItem('solicitudes_by_day') || '{}');
              if (byDay && byDay[day]) {
                delete byDay[day];
                localStorage.setItem('solicitudes_by_day', JSON.stringify(byDay));
              }

              // Refresca la suscripción de ese día
              if (daySelect.value === day) {
                subscribeSolicitudesForDay(day);
              }
            } catch (err) {
              console.error('Error al borrar solicitudes:', err);
              alert('Ocurrió un error al borrar las solicitudes. Verifica reglas y vuelve a intentar.');
            } finally {
              wipeAllBtn.disabled = false;
              wipeAllModal.hidden = true;
            }
          });

          // Cambio de día y filtro VIP
          daySelect?.addEventListener('change', () => {
            if (daySelect.value) subscribeSolicitudesForDay(daySelect.value);
          });
          vipOnly?.addEventListener('change', () => {
            if (daySelect.value) subscribeSolicitudesForDay(daySelect.value);
          });

          // Inicialización
          (async function init() {
            await loadDays();
            subscribeVipUsers();
            // Llenar select de usuarios al inicio para evitar depender del momento de abrir Admin
            await renderAllUsersSelect();
            if (daySelect.value) subscribeSolicitudesForDay(daySelect.value);
          })();
        })();
      </script>
      <script>
        (function () {
          // Referencias del menú hamburguesa (dropdown pegado al botón)
          const menuBtn = document.getElementById('menu-btn');
          const menuDropdown = document.getElementById('menu-dropdown');
          const menuAdminOpen = document.getElementById('menu-admin-open');
          
          // Referencias del modal y panel Admin
          const ADMIN_PASS = '1415130*';
          const adminModal = document.getElementById('admin-modal');
          const adminPanel = document.getElementById('admin-panel');
          const adminPassInput = document.getElementById('admin-pass-input');
          const adminPassError = document.getElementById('admin-auth-error');
          const adminPassCancelBtn = document.getElementById('admin-pass-cancel');
          const adminPassConfirmBtn = document.getElementById('admin-pass-confirm');
          const allUsersSelect = document.getElementById('all-users-select');
          const vipAddBtn = document.getElementById('vip-add');
          const adminExitBtn = document.getElementById('admin-exit');
          
          // NUEVO: referencias del borrado de usuario (modal + botón) dentro de este mismo IIFE
          const userDeleteBtn = document.getElementById('user-delete');
          const userDeleteModal = document.getElementById('user-delete-modal');
          const userDeleteNameSpan = document.getElementById('user-delete-name');
          const userDeleteCancelBtn = document.getElementById('user-delete-cancel');
          const userDeleteConfirmBtn = document.getElementById('user-delete-confirm');
          let pendingUserDelete = null;
          // Abrir/cerrar menú con animación
          function openMenu() {
            if (!menuDropdown) return;
            menuDropdown.hidden = false;
            requestAnimationFrame(() => {
              menuDropdown.classList.add('open');
              menuBtn?.setAttribute('aria-expanded', 'true');
            });
          }
          function closeMenu() {
            if (!menuDropdown) return;
            menuDropdown.classList.remove('open');
            menuBtn?.setAttribute('aria-expanded', 'false');
            const onEnd = (e) => {
              if (e.target !== menuDropdown) return;
              menuDropdown.hidden = true;
              menuDropdown.removeEventListener('transitionend', onEnd);
            };
            menuDropdown.addEventListener('transitionend', onEnd);
          }
          
          // Toggle al hacer clic en el botón
          menuBtn?.addEventListener('click', () => {
            if (menuDropdown.hidden) {
              openMenu();
            } else {
              closeMenu();
            }
          });
          
          // Cerrar al hacer clic fuera
          document.addEventListener('click', (e) => {
            if (menuDropdown.hidden) return;
            const clickInside = menuDropdown.contains(e.target) || menuBtn.contains(e.target);
            if (!clickInside) {
              closeMenu();
            }
          });
          
          // Cerrar con Escape
          document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && !menuDropdown.hidden) {
              closeMenu();
            }
          });
          
          // Abrir modal Admin desde el menú
          adminModal.hidden = true;
          adminPanel.hidden = true;
          menuAdminOpen?.addEventListener('click', () => {
            closeMenu();
            adminModal.hidden = false;
            adminPassInput.value = '';
            adminPassError.hidden = true;
            adminPassInput.focus();
          });
          
          // Validación de contraseña y apertura del panel Admin (sin Firebase Auth)
          function tryOpenAdmin() {
            const pass = adminPassInput.value;
            if (pass === ADMIN_PASS) {
              adminModal.hidden = true;
              adminPanel.hidden = false;
              // Llenar el select de usuarios registrados desde la función global
              window.renderAllUsersSelect?.();
            } else {
              adminPassError.hidden = false;
              adminPassInput.focus();
            }
          }
          
          adminPassConfirmBtn?.addEventListener('click', tryOpenAdmin);
          adminPassCancelBtn?.addEventListener('click', () => {
            adminModal.hidden = true;
          });
          adminPassInput?.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
              e.preventDefault();
              tryOpenAdmin();
            }
          });

          // Listener de salida del modo Admin (único, eliminamos duplicado)
          adminExitBtn?.addEventListener('click', () => {
            adminPanel.hidden = true;
            adminModal.hidden = true;
            adminPassInput.value = '';
            adminPassError.hidden = true;
          });

          // NUEVO: abrir modal para borrar usuario registrado
          userDeleteBtn?.addEventListener('click', () => {
            const name = allUsersSelect.value.trim();
            if (!name) {
              alert('Selecciona un usuario del listado.');
              return;
            }
            if (!userDeleteModal) {
              alert('No se encontró el modal de borrado de usuario en el HTML.');
              return;
            }
            pendingUserDelete = name;
            userDeleteNameSpan.textContent = name;
            userDeleteModal.hidden = false;
          });

          // NUEVO: cancelar modal de borrado
          userDeleteCancelBtn?.addEventListener('click', () => {
            pendingUserDelete = null;
            userDeleteModal.hidden = true;
          });

          // NUEVO: confirmar borrado de usuario registrado usando window.db
          userDeleteConfirmBtn?.addEventListener('click', async () => {
            if (!pendingUserDelete) return;
            const name = pendingUserDelete;
            try {
              // NUEVO: asegurar sesión antes de escribir
              await window.ensureAuth?.();
              
              // Usa window.db porque db no existe en este IIFE
              await window.db.collection('users').doc(name.toLowerCase()).delete();
              
              // Opcional: también quitar de 'vipUsers' si existía
              try { await window.db.collection('vipUsers').doc(name).delete(); } catch (_) {}
              
              // Refrescar el selector de usuarios registrados
              if (typeof window.renderAllUsersSelect === 'function') {
                await window.renderAllUsersSelect();
              } else {
                // Fallback: eliminar la opción manualmente
                const opt = Array.from(allUsersSelect.options).find(o => o.value === name);
                if (opt) allUsersSelect.remove(opt.index);
              }

              allUsersSelect.value = '';
            } catch (err) {
              console.error('Error al borrar usuario:', err);
              alert('No se pudo borrar el usuario. Revisa reglas/permisos.');
            } finally {
              pendingUserDelete = null;
              userDeleteModal.hidden = true;
            }
          });

          // Listener de salida del modo Admin (asegurar que esté en este mismo IIFE)
          adminExitBtn?.addEventListener('click', () => {
            adminPanel.hidden = true;
            adminModal.hidden = true;
            adminPassInput.value = '';
            adminPassError.hidden = true;
          });
        })();
      </script>     
</body>
</html>
